
## Discription
Данный проект - задание в рамках дисциплины по backend разработке. Задание было следующее:

>### Вычислятор
>
>Требуется реализовать приложение, принимающее на вход список инструкций.
>Существуют два вида инструкций:
>1. `calc`: вычислить арифметическую операцию (умножение, сложение, вычитание) над двумя сущностями и сохранить результат в переменную. Сущность может быть либо литерал типа int64, либо имя переменной. В одну и ту же переменную записывать результат можно только один раз.
>2. `print`: вывести значение указанной переменной, например, `x = 5`
    >Считаем, что каждая арифметическая операция из инструкций вычисляется долго, например 50ms. Требуется наиболее быстро вычислять результаты списка инструкций, т.е. выводить требуемые переменные.
>
>>### Пример
>>input
>>```json
>>[
>>  { "type": "calc", "op": "+", "var": "x",        "left": 10,   "right": 2    },
>>  { "type": "calc", "op": "*", "var": "y",        "left": "x",  "right": 5    },
>>  { "type": "calc", "op": "-", "var": "q",        "left": "y",  "right": 20   },
>>  { "type": "calc", "op": "+", "var": "unusedA",  "left": "y",  "right": 100  },
>>  { "type": "calc", "op": "*", "var": "unusedB",  "left": "unusedA", "right": 2 },
>>  { "type": "print",             "var": "q"                        },
>>  { "type": "calc", "op": "-", "var": "z",        "left": "x",  "right": 15   },
>>  { "type": "print",             "var": "z"                        },
>>  { "type": "calc", "op": "+", "var": "ignoreC",  "left": "z",  "right": "y"  },
>>  { "type": "print",             "var": "x"                        }
>>]
>>```
>>
>>output
>>```json
>>{ "items":
>>[
>>  {"var": "q","value": 40},
>>  {"var": "z","value": -3},
>>  {"var": "x","value": 12}
>>]
>>}
>>```

Архитектура кода - **слоистая**. То есть в центре — бизнес-логика со всеми её сущностями, которые занимаются прикладными задачами.
К бизнес-логике относятся `use cases` (код, который выполняет какой-либо бизнес-процесс, в качестве действий использует атомарные методы сервисов)
и `services` (группа методов, которые группируются в сервисы по смысловой нагрузке и необходимы для изоляции сценария от внешних зависимостей).
Вокруг бизнес-логики - драйверы, которые могут использоваться как для вызова бизнес-логики, так и для предоставления данных для бизнес-логики (это `handlers` и `stores`).

На данный момент реализовано 2 хэндлера для основного сервиса - `grpc` и `restfull api`.

Так как задание подразумевало, что математические операции выполняются долго, будто это запрос в другой сервис,
**логика вычислений была на самом деле вынесена в отдельный сервис** (для наглядности),
общение основного сервиса с ним осуществляется через `grpc`.
В данный момент в этом сервисе вся логика написана просто в хэндлере (при его увеличении логика также будет разбита на несколько слоев).

На данном этапе логика в основном сервисе реализована с помощью горутин и различных элемнтов синхранизации (wait groups и mutexes),
но так как теперь логика вычислений вынесена в отдельный сервис - в перспективе реализовать **брокер сообщений** для асинхронной обработки результатов,
что упростит логику в оснвном сервисе, избавив от необходимости каких-либо элементов синхранизации, а также позволит независимо масштабировать арифметический сервис и значительно увеличить количество инструкций в контексте одного запроса на основной сервис.
